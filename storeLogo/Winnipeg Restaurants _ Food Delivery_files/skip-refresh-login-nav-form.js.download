window.skipthedishes=window.skipthedishes||{},window.skipthedishes.LoginNavForm=function($,window,skipLoading,navDropdowns){function _showError(message){_$errorMsgContainer.text(message),_$errorMsgContainer.removeClass("hidden"),navDropdowns.updateDropdownMenuHeight()}function _hideError(){_$errorMsgContainer.text(""),_$errorMsgContainer.addClass("hidden"),navDropdowns.updateDropdownMenuHeight()}var _$errorMsgContainer;return{init:function(params){$(document).ready(function(){_$errorMsgContainer=$(params.errorMessageContainerSelector),$(params.formSelector).formValidation().on("success.form.fv",function(e){e.preventDefault();var $form=$(e.target),formValidation=$(e.target).data("formValidation"),$submitButton=formValidation.getSubmitButton(),$spinner=$submitButton.find(".ion-submit-spinner");_hideError(),formValidation.disableSubmitButtons(!0),$spinner.removeClass("hidden"),skipLoading.showLoading(!0),$.post(params.jsonUrl,$form.serialize(),function(data){data.success&&("/user/login/"===window.location.pathname?window.location.replace("/"):"/gift-cards/login"===window.location.pathname?window.location.replace("/gift-cards/redeem"):window.location.reload(!0)),data.error&&(_showError(data.error),skipLoading.showLoading(!1))}).fail(function(){_showError("There was an unexpected error. Please try again."),skipLoading.showLoading(!1)}).always(function(){$spinner.addClass("hidden"),formValidation.disableSubmitButtons(!1),formValidation.resetField($form.find("#password"),!0)})})})}}}(jQuery,window,window.skipthedishes.Loading,window.skipthedishes.NavDropdowns);