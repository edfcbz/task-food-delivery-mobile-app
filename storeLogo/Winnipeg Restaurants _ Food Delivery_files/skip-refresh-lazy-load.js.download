window.skipthedishes=window.skipthedishes||{},window.skipthedishes.LazyLoad=function(window,$){function _showSpinner(spinnerSelector){$(spinnerSelector).removeClass("hidden")}function _getImageRatio(){return _$visibleMobile&&_$visibleMobile.is(":visible")?_MOBILE_RATIO:_RATIO}function _setImageRatio(lazySelector,containerSelector){$(lazySelector).each(function(){var $container=$(this).closest(containerSelector),imageRatio=_getImageRatio();$container.css("padding-bottom",Math.floor($container.width()*imageRatio))})}function _fillImageContainer(lazySelector,containerSelector){$(lazySelector).each(function(){var $this=$(this),naturalRatio=$this.height()/$this.width(),imageRatio=_getImageRatio();_setImageRatio(lazySelector,containerSelector),$this.css("max-"+(naturalRatio>imageRatio?"width":"height"),"101%"),$this.css("max-"+(naturalRatio>imageRatio?"height":"width"),"none")})}function _attachLoadedHandlers(params){var effect=params&&params.effect||_effect,lazySelector=params&&params.lazySelector||_lazySelector,containerSelector=params&&params.containerSelector||_containerSelector,imageLoadedClass=params&&params.imageLoadedClass||_imageLoadedClass,spinnerSelector=params&&params.spinnerSelector||_spinnerSelector,fillContainer=params&&params.fillContainer||_fillContainer;"fadeIn"!==effect&&(_setImageRatio(lazySelector,containerSelector),$(lazySelector).on("load",function(){$(this).prop("src")===$(this).data("original")&&($(this).closest(containerSelector).addClass(imageLoadedClass),fillContainer&&(_fillImageContainer(lazySelector,containerSelector),_windowWidth=$(window).width(),$(window).on("resize",function(){var newWindowWidth=$(window).width();newWindowWidth!==_windowWidth&&(_windowWidth=newWindowWidth,_fillImageContainer(lazySelector,containerSelector))})),params&&params.callback&&params.callback())})),spinnerSelector&&(document.fonts?document.fonts.ready.then(function(){_showSpinner(spinnerSelector)}):_showSpinner(spinnerSelector))}function _lazyLoad(params){var effect=params&&params.effect||_effect;_attachLoadedHandlers(params),$.isFunction($.fn.lazyload)&&$(_lazySelector).lazyload(effect?{effect:effect}:{})}var _lazySelector,_effect,_containerSelector,_spinnerSelector,_imageLoadedClass,_fillContainer,_$visibleMobile,_windowWidth,_RATIO=2/3,_MOBILE_RATIO=.6;return{init:function(params){_lazySelector=params.lazySelector,_effect=void 0===params.effect?"fadeIn":params.effect,_containerSelector=params.containerSelector,_spinnerSelector=params.spinnerSelector,_imageLoadedClass=params.imageLoadedClass,_fillContainer=params.fillContainer,$(document).ready(function(){_$visibleMobile=$(params.visibleMobileSelector),_lazyLoad()})},reLazyLoad:function(){$(document).ready(_lazyLoad)},attachLoadedHandlers:function(params){_attachLoadedHandlers(params)},fillImageContainer:function(lazySelector,containerSelector){_fillImageContainer(lazySelector,containerSelector)}}}(window,jQuery);