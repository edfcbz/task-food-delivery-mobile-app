window.skipthedishes=window.skipthedishes||{},window.skipthedishes.NavDropdowns=function($){function _isScreenXs(){return _$visibleScreenXs.is(":visible")}function _updateDropdownMenuHeight(params){var height,$dropdownMenu=params.$dropdownMenu;height=_isScreenXs()?params.show&&$dropdownMenu[0]?$(window).height()-_$navbar.height():0:params.show&&$dropdownMenu[0]?$dropdownMenu[0].scrollHeight:0,$dropdownMenu.css("max-height",height)}function _updateVisibleNavbarLinks(params){params.$dropdown.is(_navDropdownOrderWidgetSelector)&&($(_navDropdownSelector).not(_navDropdownOrderWidgetSelector).find(_dropdownToggleSelector+":first").toggleClass("hidden-xs",params.show),_$navbarCloseDropdown.toggleClass("hidden-xs",!params.show))}function _toggleDropdown(params){var $dropdown=params.$dropdown;if($dropdown&&$dropdown[0]){var $dropdownMenu=$dropdown.find(_dropdownMenuSelector),show=params.show||!1;_updateDropdownMenuHeight({$dropdownMenu:$dropdownMenu,show:show}),_updateVisibleNavbarLinks({$dropdown:$dropdown,show:show}),_$body.toggleClass(_navDropdownOpenBodyClass,show),clearTimeout(_dropdownTimer),$dropdownMenu.css("overflow","hidden"),show&&$dropdownMenu.is(_loginDropDownSelector)&&$(_loginDropDownContentSelector).scrollTop(1),_dropdownTimer=setTimeout(function(){show?$dropdownMenu.is(_loginDropDownSelector)?$dropdownMenu.css("overflow","auto"):$dropdownMenu.css("overflow","visible"):$dropdownMenu.css("overflow","hidden")},show?650:0)}}function _toggleDropdownHandler(e){var $dropdown=$(e.target),$openDropdown=$(_navDropdownSelector).filter("."+_navDropdownOpenClass),show="show"==e.type;$openDropdown[0]&&(_toggleDropdown({$dropdown:$openDropdown,show:!1}),$(_smartBannerSelector).addClass(_smartBannerShownClass)),show&&(_toggleDropdown({$dropdown:$dropdown,show:!0}),$(_smartBannerSelector).removeClass(_smartBannerShownClass))}var _$body,_navDropdownOpenBodyClass,_$visibleScreenXs,_navDropdownSelector,_loginDropDownSelector,_loginDropDownContentSelector,_navDropdownOpenClass,_navDropdownOrderWidgetSelector,_$navbar,_$navbarCloseDropdown,_dropdownToggleSelector,_dropdownMenuSelector,_dropdownTimer,_smartBannerSelector,_smartBannerShownClass;return{init:function(params){_navDropdownOpenBodyClass=params.navDropdownOpenBodyClass,_navDropdownSelector=params.navDropdownSelector,_loginDropDownSelector=params.loginDropDownSelector,_loginDropDownContentSelector=params.loginDropDownContentSelector,_navDropdownOpenClass=params.navDropdownOpenClass,_navDropdownOrderWidgetSelector=params.navDropdownOrderWidgetSelector;var navbarSelector=params.navbarSelector;_dropdownToggleSelector=params.dropdownToggleSelector,_dropdownMenuSelector=params.dropdownMenuSelector,_smartBannerShownClass=params.shownClass,_smartBannerSelector=params.smartBannerSelector,$(document).ready(function(){var $navDropdown=$(_navDropdownSelector);_$body=$(params.bodySelector),_$visibleScreenXs=$("<div>").css({visibility:"hidden",width:1,height:1,pointerEvents:"none",position:"absolute"}).addClass("visible-xs").appendTo(_$body),_$navbar=$(navbarSelector),_$navbarCloseDropdown=$(params.navCloseDropdownSelector),$navDropdown.each(function(){_updateDropdownMenuHeight({$dropdownMenu:$(this).find(_dropdownMenuSelector+":first"),show:!1})}),$navDropdown.on("show.bs.dropdown",_toggleDropdownHandler),$navDropdown.on("hide.bs.dropdown",_toggleDropdownHandler)})},updateDropdownMenuHeight:function($dropdownTarget){var $dropdown=$dropdownTarget||$(_navDropdownSelector+"."+_navDropdownOpenClass);$dropdown[0]&&_updateDropdownMenuHeight({$dropdownMenu:$dropdown.find(_dropdownMenuSelector+":first"),show:!0})}}}(jQuery);