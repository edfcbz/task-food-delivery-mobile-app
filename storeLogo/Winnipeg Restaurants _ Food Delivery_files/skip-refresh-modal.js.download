!function($,window,document){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}function _isIOS(userAgent){return/ipad|iphone|ipod/i.test(userAgent)}var pluginName="skipModal",defaults={loadModal:function(){},frameLoad:function(){},closeModal:function(){}};$.extend(Plugin.prototype,{init:function(){var self=this,$element=$(this.element),$modalTitle=$element.find(".modal-title"),$frame=$element.find("iframe"),userAgent=navigator.userAgent.toLowerCase(),isIOS=_isIOS(userAgent);$element.on("show.bs.modal",function(e){function escKeyClosesModal(e){27==e.which&&$element.modal("hide")}$(document).on("keydown."+self._name,escKeyClosesModal),$frame.attr("height",0),$frame.height(0),$frame.css("visibility","hidden"),$modalTitle.html('<i class="ion-icon ion-load-c ion-spin ion-sm"></i> Loading...');var modalData=self.settings.loadModal($(e.relatedTarget));if("string"==typeof modalData&&(modalData={url:modalData}),$frame.on("load."+self._name,function(){var $this=$(this),$contents=$this.contents();$(this.contentWindow.document).on("keydown."+self._name,escKeyClosesModal),$this.attr("width","100%"),$this.width("100%"),modalData.preventFrameResize||($this.attr("height",0),$this.height(0)),$this.css("visibility","visible"),$modalTitle.text($contents.attr("title")),$contents.find(".close-modal").click(function(){$element.modal("hide")}),modalData.preventFrameResize||($this.attr("height",$contents.height()),$this.height($contents.height())),self.settings.frameLoad($contents,$frame)}),isIOS){var url=modalData.url;url+=(url.split("?")[1]?"&":"?")+"is_modal=false",window.location.assign(url)}else $frame[0].contentWindow.location.replace(modalData.url)}),$element.on("hide.bs.modal",function(e){$(document).off("keydown."+self._name),$frame.off("load."+self._name),self.settings.closeModal(e)})}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),window.closeModal=function(modalSelector){$(modalSelector).modal("hide")};